import{r as x}from"./react.94f0f2be.js";import{p as a}from"./prop-types.0dfc79bf.js";/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var M=function(r,i){return M=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},M(r,i)};function H(r,i){M(r,i);function t(){this.constructor=r}r.prototype=i===null?Object.create(i):(t.prototype=i.prototype,new t)}var m=function(){return m=Object.assign||function(i){for(var t,e=1,o=arguments.length;e<o;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},m.apply(this,arguments)};function G(r,i){var t={};for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&i.indexOf(e)<0&&(t[e]=r[e]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,e=Object.getOwnPropertySymbols(r);o<e.length;o++)i.indexOf(e[o])<0&&(t[e[o]]=r[e[o]]);return t}var p;(function(r){r.AUTO="auto",r.START="start",r.CENTER="center",r.END="end"})(p||(p={}));var l;(function(r){r.HORIZONTAL="horizontal",r.VERTICAL="vertical"})(l||(l={}));var v;(function(r){r.OBSERVED="observed",r.REQUESTED="requested"})(v||(v={}));var b=(g={},g[l.VERTICAL]="scrollTop",g[l.HORIZONTAL]="scrollLeft",g),I=(z={},z[l.VERTICAL]="height",z[l.HORIZONTAL]="width",z),k=(y={},y[l.VERTICAL]="top",y[l.HORIZONTAL]="left",y),j=(T={},T[l.VERTICAL]="marginTop",T[l.HORIZONTAL]="marginLeft",T),Z=(O={},O[l.VERTICAL]="marginBottom",O[l.HORIZONTAL]="marginRight",O),g,z,y,T,O,q=function(){function r(i){var t=i.itemCount,e=i.itemSizeGetter,o=i.estimatedItemSize;this.itemSizeGetter=e,this.itemCount=t,this.estimatedItemSize=o,this.itemSizeAndPositionData={},this.lastMeasuredIndex=-1}return r.prototype.updateConfig=function(i){var t=i.itemCount,e=i.itemSizeGetter,o=i.estimatedItemSize;t!=null&&(this.itemCount=t),o!=null&&(this.estimatedItemSize=o),e!=null&&(this.itemSizeGetter=e)},r.prototype.getLastMeasuredIndex=function(){return this.lastMeasuredIndex},r.prototype.getSizeAndPositionForIndex=function(i){if(i<0||i>=this.itemCount)throw Error("Requested index "+i+" is outside of range 0.."+this.itemCount);if(i>this.lastMeasuredIndex){for(var t=this.getSizeAndPositionOfLastMeasuredItem(),e=t.offset+t.size,o=this.lastMeasuredIndex+1;o<=i;o++){var n=this.itemSizeGetter(o);if(n==null||isNaN(n))throw Error("Invalid size returned for index "+o+" of value "+n);this.itemSizeAndPositionData[o]={offset:e,size:n},e+=n}this.lastMeasuredIndex=i}return this.itemSizeAndPositionData[i]},r.prototype.getSizeAndPositionOfLastMeasuredItem=function(){return this.lastMeasuredIndex>=0?this.itemSizeAndPositionData[this.lastMeasuredIndex]:{offset:0,size:0}},r.prototype.getTotalSize=function(){var i=this.getSizeAndPositionOfLastMeasuredItem();return i.offset+i.size+(this.itemCount-this.lastMeasuredIndex-1)*this.estimatedItemSize},r.prototype.getUpdatedOffsetForIndex=function(i){var t=i.align,e=t===void 0?p.START:t,o=i.containerSize,n=i.currentOffset,s=i.targetIndex;if(o<=0)return 0;var f=this.getSizeAndPositionForIndex(s),d=f.offset,c=d-o+f.size,u;switch(e){case p.END:u=c;break;case p.CENTER:u=d-(o-f.size)/2;break;case p.START:u=d;break;default:u=Math.max(c,Math.min(d,n))}var h=this.getTotalSize();return Math.max(0,Math.min(h-o,u))},r.prototype.getVisibleRange=function(i){var t=i.containerSize,e=i.offset,o=i.overscanCount,n=this.getTotalSize();if(n===0)return{};var s=e+t,f=this.findNearestItem(e);if(typeof f>"u")throw Error("Invalid offset "+e+" specified");var d=this.getSizeAndPositionForIndex(f);e=d.offset+d.size;for(var c=f;e<s&&c<this.itemCount-1;)c++,e+=this.getSizeAndPositionForIndex(c).size;return o&&(f=Math.max(0,f-o),c=Math.min(c+o,this.itemCount-1)),{start:f,stop:c}},r.prototype.resetItem=function(i){this.lastMeasuredIndex=Math.min(this.lastMeasuredIndex,i-1)},r.prototype.findNearestItem=function(i){if(isNaN(i))throw Error("Invalid offset "+i+" specified");i=Math.max(0,i);var t=this.getSizeAndPositionOfLastMeasuredItem(),e=Math.max(0,this.lastMeasuredIndex);return t.offset>=i?this.binarySearch({high:e,low:0,offset:i}):this.exponentialSearch({index:e,offset:i})},r.prototype.binarySearch=function(i){for(var t=i.low,e=i.high,o=i.offset,n=0,s=0;t<=e;){if(n=t+Math.floor((e-t)/2),s=this.getSizeAndPositionForIndex(n).offset,s===o)return n;s<o?t=n+1:s>o&&(e=n-1)}return t>0?t-1:0},r.prototype.exponentialSearch=function(i){for(var t=i.index,e=i.offset,o=1;t<this.itemCount&&this.getSizeAndPositionForIndex(t).offset<e;)t+=o,o*=2;return this.binarySearch({high:Math.min(t,this.itemCount-1),low:Math.floor(t/2),offset:e})},r}(),Q={overflow:"auto",willChange:"transform",WebkitOverflowScrolling:"touch"},Y={position:"relative",width:"100%",minHeight:"100%"},D={position:"absolute",top:0,left:0,width:"100%"},W=m({},D,{position:"sticky"}),J=function(r){H(i,r);function i(){var t=r!==null&&r.apply(this,arguments)||this;return t.itemSizeGetter=function(e){return function(o){return t.getSize(o,e)}},t.sizeAndPositionManager=new q({itemCount:t.props.itemCount,itemSizeGetter:t.itemSizeGetter(t.props.itemSize),estimatedItemSize:t.getEstimatedItemSize()}),t.state={offset:t.props.scrollOffset||t.props.scrollToIndex!=null&&t.getOffsetForIndex(t.props.scrollToIndex)||0,scrollChangeReason:v.REQUESTED},t.styleCache={},t.getRef=function(e){t.rootNode=e},t.handleScroll=function(e){var o=t.props.onScroll,n=t.getNodeOffset();n<0||t.state.offset===n||e.target!==t.rootNode||(t.setState({offset:n,scrollChangeReason:v.OBSERVED}),typeof o=="function"&&o(n,e))},t}return i.prototype.componentDidMount=function(){var t=this.props,e=t.scrollOffset,o=t.scrollToIndex;this.rootNode.addEventListener("scroll",this.handleScroll,{passive:!0}),e!=null?this.scrollTo(e):o!=null&&this.scrollTo(this.getOffsetForIndex(o))},i.prototype.UNSAFE_componentWillReceiveProps=function(t){var e=this.props,o=e.estimatedItemSize,n=e.itemCount,s=e.itemSize,f=e.scrollOffset,d=e.scrollToAlignment,c=e.scrollToIndex,u=t.scrollToIndex!==c||t.scrollToAlignment!==d,h=t.itemCount!==n||t.itemSize!==s||t.estimatedItemSize!==o;t.itemSize!==s&&this.sizeAndPositionManager.updateConfig({itemSizeGetter:this.itemSizeGetter(t.itemSize)}),(t.itemCount!==n||t.estimatedItemSize!==o)&&this.sizeAndPositionManager.updateConfig({itemCount:t.itemCount,estimatedItemSize:this.getEstimatedItemSize(t)}),h&&this.recomputeSizes(),t.scrollOffset!==f?this.setState({offset:t.scrollOffset||0,scrollChangeReason:v.REQUESTED}):typeof t.scrollToIndex=="number"&&(u||h)&&this.setState({offset:this.getOffsetForIndex(t.scrollToIndex,t.scrollToAlignment,t.itemCount),scrollChangeReason:v.REQUESTED})},i.prototype.componentDidUpdate=function(t,e){var o=this.state,n=o.offset,s=o.scrollChangeReason;e.offset!==n&&s===v.REQUESTED&&this.scrollTo(n)},i.prototype.componentWillUnmount=function(){this.rootNode.removeEventListener("scroll",this.handleScroll)},i.prototype.scrollTo=function(t){var e=this.props.scrollDirection,o=e===void 0?l.VERTICAL:e;this.rootNode[b[o]]=t},i.prototype.getOffsetForIndex=function(t,e,o){e===void 0&&(e=this.props.scrollToAlignment),o===void 0&&(o=this.props.itemCount);var n=this.props.scrollDirection,s=n===void 0?l.VERTICAL:n;return(t<0||t>=o)&&(t=0),this.sizeAndPositionManager.getUpdatedOffsetForIndex({align:e,containerSize:this.props[I[s]],currentOffset:this.state&&this.state.offset||0,targetIndex:t})},i.prototype.recomputeSizes=function(t){t===void 0&&(t=0),this.styleCache={},this.sizeAndPositionManager.resetItem(t)},i.prototype.render=function(){var t=this,e=this.props;e.estimatedItemSize;var o=e.height,n=e.overscanCount,s=n===void 0?3:n,f=e.renderItem;e.itemCount,e.itemSize;var d=e.onItemsRendered;e.onScroll;var c=e.scrollDirection,u=c===void 0?l.VERTICAL:c;e.scrollOffset,e.scrollToIndex,e.scrollToAlignment;var h=e.stickyIndices,P=e.style,N=e.width,V=G(e,["estimatedItemSize","height","overscanCount","renderItem","itemCount","itemSize","onItemsRendered","onScroll","scrollDirection","scrollOffset","scrollToIndex","scrollToAlignment","stickyIndices","style","width"]),F=this.state.offset,L=this.sizeAndPositionManager.getVisibleRange({containerSize:this.props[I[u]]||0,offset:F,overscanCount:s}),C=L.start,A=L.stop,E=[],U=m({},Q,P,{height:o,width:N}),_=m({},Y,(R={},R[I[u]]=this.sizeAndPositionManager.getTotalSize(),R));if(h!=null&&h.length!==0&&(h.forEach(function(w){return E.push(f({index:w,style:t.getStyle(w,!0)}))}),u===l.HORIZONTAL&&(_.display="flex")),typeof C<"u"&&typeof A<"u"){for(var S=C;S<=A;S++)h!=null&&h.includes(S)||E.push(f({index:S,style:this.getStyle(S,!1)}));typeof d=="function"&&d({startIndex:C,stopIndex:A})}return x.exports.createElement("div",m({ref:this.getRef},V,{style:U}),x.exports.createElement("div",{style:_},E));var R},i.prototype.getNodeOffset=function(){var t=this.props.scrollDirection,e=t===void 0?l.VERTICAL:t;return this.rootNode[b[e]]},i.prototype.getEstimatedItemSize=function(t){return t===void 0&&(t=this.props),t.estimatedItemSize||typeof t.itemSize=="number"&&t.itemSize||50},i.prototype.getSize=function(t,e){return typeof e=="function"?e(t):Array.isArray(e)?e[t]:e},i.prototype.getStyle=function(t,e){var o=this.styleCache[t];if(o)return o;var n=this.props.scrollDirection,s=n===void 0?l.VERTICAL:n,f=this.sizeAndPositionManager.getSizeAndPositionForIndex(t),d=f.size,c=f.offset;return this.styleCache[t]=e?m({},W,(u={},u[I[s]]=d,u[j[s]]=c,u[Z[s]]=-(c+d),u.zIndex=1,u)):m({},D,(h={},h[I[s]]=d,h[k[s]]=c,h));var u,h},i.defaultProps={overscanCount:3,scrollDirection:l.VERTICAL,width:"100%"},i.propTypes={estimatedItemSize:a.exports.number,height:a.exports.oneOfType([a.exports.number,a.exports.string]).isRequired,itemCount:a.exports.number.isRequired,itemSize:a.exports.oneOfType([a.exports.number,a.exports.array,a.exports.func]).isRequired,onScroll:a.exports.func,onItemsRendered:a.exports.func,overscanCount:a.exports.number,renderItem:a.exports.func.isRequired,scrollOffset:a.exports.number,scrollToIndex:a.exports.number,scrollToAlignment:a.exports.oneOf([p.AUTO,p.START,p.CENTER,p.END]),scrollDirection:a.exports.oneOf([l.HORIZONTAL,l.VERTICAL]),stickyIndices:a.exports.arrayOf(a.exports.number),style:a.exports.object,width:a.exports.oneOfType([a.exports.number,a.exports.string])},i}(x.exports.PureComponent);export{J as V};
