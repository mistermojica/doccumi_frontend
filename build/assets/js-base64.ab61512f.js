const h=typeof btoa=="function",u=typeof Buffer=="function";typeof TextDecoder=="function"&&new TextDecoder;const i=typeof TextEncoder=="function"?new TextEncoder:void 0,p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",a=Array.prototype.slice.call(p);(t=>{let e={};return t.forEach((o,n)=>e[o]=n),e})(a);const r=String.fromCharCode.bind(String);typeof Uint8Array.from=="function"&&Uint8Array.from.bind(Uint8Array);const y=t=>t.replace(/=/g,"").replace(/[+\/]/g,e=>e=="+"?"-":"_"),b=t=>{let e,o,n,f,s="";const x=t.length%3;for(let c=0;c<t.length;){if((o=t.charCodeAt(c++))>255||(n=t.charCodeAt(c++))>255||(f=t.charCodeAt(c++))>255)throw new TypeError("invalid character found");e=o<<16|n<<8|f,s+=a[e>>18&63]+a[e>>12&63]+a[e>>6&63]+a[e&63]}return x?s.slice(0,x-3)+"===".substring(x):s},d=h?t=>btoa(t):u?t=>Buffer.from(t,"binary").toString("base64"):b,g=u?t=>Buffer.from(t).toString("base64"):t=>{let o=[];for(let n=0,f=t.length;n<f;n+=4096)o.push(r.apply(null,t.subarray(n,n+4096)));return d(o.join(""))},m=t=>{if(t.length<2){var e=t.charCodeAt(0);return e<128?t:e<2048?r(192|e>>>6)+r(128|e&63):r(224|e>>>12&15)+r(128|e>>>6&63)+r(128|e&63)}else{var e=65536+(t.charCodeAt(0)-55296)*1024+(t.charCodeAt(1)-56320);return r(240|e>>>18&7)+r(128|e>>>12&63)+r(128|e>>>6&63)+r(128|e&63)}},A=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,C=t=>t.replace(A,m),l=u?t=>Buffer.from(t,"utf8").toString("base64"):i?t=>g(i.encode(t)):t=>d(C(t)),_=(t,e=!1)=>e?y(l(t)):l(t);export{_ as e};
