import{r as sn}from"./react.94f0f2be.js";var un=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function hn(P){return P&&P.__esModule&&Object.prototype.hasOwnProperty.call(P,"default")?P.default:P}function dn(P){var E=P.default;if(typeof E=="function"){var W=function(){return E.apply(this,arguments)};W.prototype=E.prototype}else W={};return Object.defineProperty(W,"__esModule",{value:!0}),Object.keys(P).forEach(function(l){var f=Object.getOwnPropertyDescriptor(P,l);Object.defineProperty(W,l,f.get?f:{enumerable:!0,get:function(){return P[l]}})}),W}var ie={exports:{}};/*!
 * @license Copyright (c) 2003-2022, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */(function(P,E){(function(W,l){P.exports=l(sn.exports)})(window,function(W){return function(l){var f={};function a(o){if(f[o])return f[o].exports;var u=f[o]={i:o,l:!1,exports:{}};return l[o].call(u.exports,u,u.exports,a),u.l=!0,u.exports}return a.m=l,a.c=f,a.d=function(o,u,b){a.o(o,u)||Object.defineProperty(o,u,{enumerable:!0,get:b})},a.r=function(o){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},a.t=function(o,u){if(1&u&&(o=a(o)),8&u||4&u&&typeof o=="object"&&o&&o.__esModule)return o;var b=Object.create(null);if(a.r(b),Object.defineProperty(b,"default",{enumerable:!0,value:o}),2&u&&typeof o!="string")for(var s in o)a.d(b,s,function(p){return o[p]}.bind(null,s));return b},a.n=function(o){var u=o&&o.__esModule?function(){return o.default}:function(){return o};return a.d(u,"a",u),u},a.o=function(o,u){return Object.prototype.hasOwnProperty.call(o,u)},a.p="",a(a.s=12)}([function(l,f,a){var o=a(4),u=typeof self=="object"&&self&&self.Object===Object&&self,b=o.a||u||Function("return this")();f.a=b},function(l,f,a){l.exports=a(10)()},function(l,f,a){(function(o){var u=a(4),b=E&&!E.nodeType&&E,s=b&&typeof o=="object"&&o&&!o.nodeType&&o,p=s&&s.exports===b&&u.a.process,g=function(){try{var x=s&&s.require&&s.require("util").types;return x||p&&p.binding&&p.binding("util")}catch{}}();f.a=g}).call(this,a(6)(l))},function(l,f){l.exports=W},function(l,f,a){(function(o){var u=typeof o=="object"&&o&&o.Object===Object&&o;f.a=u}).call(this,a(9))},function(l,f,a){(function(o){var u=a(0),b=a(7),s=E&&!E.nodeType&&E,p=s&&typeof o=="object"&&o&&!o.nodeType&&o,g=p&&p.exports===s?u.a.Buffer:void 0,x=(g?g.isBuffer:void 0)||b.a;f.a=x}).call(this,a(6)(l))},function(l,f){l.exports=function(a){if(!a.webpackPolyfill){var o=Object.create(a);o.children||(o.children=[]),Object.defineProperty(o,"loaded",{enumerable:!0,get:function(){return o.l}}),Object.defineProperty(o,"id",{enumerable:!0,get:function(){return o.i}}),Object.defineProperty(o,"exports",{enumerable:!0}),o.webpackPolyfill=1}return o}},function(l,f,a){f.a=function(){return!1}},function(l,f,a){(function(o){var u=a(0),b=E&&!E.nodeType&&E,s=b&&typeof o=="object"&&o&&!o.nodeType&&o,p=s&&s.exports===b?u.a.Buffer:void 0,g=p?p.allocUnsafe:void 0;f.a=function(x,Q){if(Q)return x.slice();var q=x.length,V=g?g(q):new x.constructor(q);return x.copy(V),V}}).call(this,a(6)(l))},function(l,f){var a;a=function(){return this}();try{a=a||new Function("return this")()}catch{typeof window=="object"&&(a=window)}l.exports=a},function(l,f,a){var o=a(11);function u(){}function b(){}b.resetWarningCache=u,l.exports=function(){function s(x,Q,q,V,Et,S){if(S!==o){var K=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw K.name="Invariant Violation",K}}function p(){return s}s.isRequired=s;var g={array:s,bigint:s,bool:s,func:s,number:s,object:s,string:s,symbol:s,any:s,arrayOf:p,element:s,elementType:s,instanceOf:p,node:s,objectOf:p,oneOf:p,oneOfType:p,shape:p,exact:p,checkPropTypes:b,resetWarningCache:u};return g.PropTypes=g,g}},function(l,f,a){l.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(l,f,a){a.r(f),a.d(f,"CKEditor",function(){return F}),a.d(f,"CKEditorContext",function(){return jt});var o=a(3),u=a.n(o),b=a(1),s=a.n(b),p=function(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")},g=a(0),x=function(){return g.a.Date.now()},Q=/\s/,q=function(t){for(var e=t.length;e--&&Q.test(t.charAt(e)););return e},V=/^\s+/,Et=function(t){return t&&t.slice(0,q(t)+1).replace(V,"")},S=g.a.Symbol,K=Object.prototype,ae=K.hasOwnProperty,se=K.toString,G=S?S.toStringTag:void 0,ce=function(t){var e=ae.call(t,G),r=t[G];try{t[G]=void 0;var n=!0}catch{}var i=se.call(t);return n&&(e?t[G]=r:delete t[G]),i},ue=Object.prototype.toString,he=function(t){return ue.call(t)},xt=S?S.toStringTag:void 0,D=function(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":xt&&xt in Object(t)?ce(t):he(t)},R=function(t){return t!=null&&typeof t=="object"},de=function(t){return typeof t=="symbol"||R(t)&&D(t)=="[object Symbol]"},le=/^[-+]0x[0-9a-f]+$/i,fe=/^0b[01]+$/i,pe=/^0o[0-7]+$/i,_e=parseInt,Ot=function(t){if(typeof t=="number")return t;if(de(t))return NaN;if(p(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=p(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=Et(t);var r=fe.test(t);return r||pe.test(t)?_e(t.slice(2),r?2:8):le.test(t)?NaN:+t},ye=Math.max,ve=Math.min,be=function(t,e,r){var n,i,h,d,c,m,v=0,nt=!1,U=!1,C=!0;if(typeof t!="function")throw new TypeError("Expected a function");function H(w){var T=n,it=i;return n=i=void 0,v=w,d=t.apply(it,T)}function ot(w){return v=w,c=setTimeout(O,e),nt?H(w):d}function X(w){var T=w-m;return m===void 0||T>=e||T<0||U&&w-v>=h}function O(){var w=x();if(X(w))return A(w);c=setTimeout(O,function(T){var it=e-(T-m);return U?ve(it,h-(T-v)):it}(w))}function A(w){return c=void 0,C&&n?H(w):(n=i=void 0,d)}function wt(){var w=x(),T=X(w);if(n=arguments,i=this,m=w,T){if(c===void 0)return ot(m);if(U)return clearTimeout(c),c=setTimeout(O,e),H(m)}return c===void 0&&(c=setTimeout(O,e)),d}return e=Ot(e)||0,p(r)&&(nt=!!r.leading,h=(U="maxWait"in r)?ye(Ot(r.maxWait)||0,e):h,C="trailing"in r?!!r.trailing:C),wt.cancel=function(){c!==void 0&&clearTimeout(c),v=0,n=m=i=c=void 0},wt.flush=function(){return c===void 0?d:A(x())},wt},ge=function(t,e,r){var n=!0,i=!0;if(typeof t!="function")throw new TypeError("Expected a function");return p(r)&&(n="leading"in r?!!r.leading:n,i="trailing"in r?!!r.trailing:i),be(t,e,{leading:n,maxWait:e,trailing:i})},me=function(){this.__data__=[],this.size=0},Pt=function(t,e){return t===e||t!=t&&e!=e},Z=function(t,e){for(var r=t.length;r--;)if(Pt(t[r][0],e))return r;return-1},je=Array.prototype.splice,we=function(t){var e=this.__data__,r=Z(e,t);return!(r<0)&&(r==e.length-1?e.pop():je.call(e,r,1),--this.size,!0)},Ee=function(t){var e=this.__data__,r=Z(e,t);return r<0?void 0:e[r][1]},xe=function(t){return Z(this.__data__,t)>-1},Oe=function(t,e){var r=this.__data__,n=Z(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this};function N(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}N.prototype.clear=me,N.prototype.delete=we,N.prototype.get=Ee,N.prototype.has=xe,N.prototype.set=Oe;var tt=N,Pe=function(){this.__data__=new tt,this.size=0},Ce=function(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r},Ae=function(t){return this.__data__.get(t)},Te=function(t){return this.__data__.has(t)},Ct,At=function(t){if(!p(t))return!1;var e=D(t);return e=="[object Function]"||e=="[object GeneratorFunction]"||e=="[object AsyncFunction]"||e=="[object Proxy]"},at=g.a["__core-js_shared__"],Tt=(Ct=/[^.]+$/.exec(at&&at.keys&&at.keys.IE_PROTO||""))?"Symbol(src)_1."+Ct:"",We=function(t){return!!Tt&&Tt in t},Se=Function.prototype.toString,I=function(t){if(t!=null){try{return Se.call(t)}catch{}try{return t+""}catch{}}return""},Re=/^\[object .+?Constructor\]$/,De=Function.prototype,Ie=Object.prototype,ze=De.toString,Me=Ie.hasOwnProperty,Fe=RegExp("^"+ze.call(Me).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ue=function(t){return!(!p(t)||We(t))&&(At(t)?Fe:Re).test(I(t))},Ne=function(t,e){return t==null?void 0:t[e]},z=function(t,e){var r=Ne(t,e);return Ue(r)?r:void 0},Y=z(g.a,"Map"),J=z(Object,"create"),ke=function(){this.__data__=J?J(null):{},this.size=0},Le=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Be=Object.prototype.hasOwnProperty,$e=function(t){var e=this.__data__;if(J){var r=e[t];return r==="__lodash_hash_undefined__"?void 0:r}return Be.call(e,t)?e[t]:void 0},He=Object.prototype.hasOwnProperty,Qe=function(t){var e=this.__data__;return J?e[t]!==void 0:He.call(e,t)},qe=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=J&&e===void 0?"__lodash_hash_undefined__":e,this};function k(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}k.prototype.clear=ke,k.prototype.delete=Le,k.prototype.get=$e,k.prototype.has=Qe,k.prototype.set=qe;var Wt=k,Ve=function(){this.size=0,this.__data__={hash:new Wt,map:new(Y||tt),string:new Wt}},Ke=function(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null},et=function(t,e){var r=t.__data__;return Ke(e)?r[typeof e=="string"?"string":"hash"]:r.map},Ge=function(t){var e=et(this,t).delete(t);return this.size-=e?1:0,e},Ye=function(t){return et(this,t).get(t)},Je=function(t){return et(this,t).has(t)},Xe=function(t,e){var r=et(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this};function L(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}L.prototype.clear=Ve,L.prototype.delete=Ge,L.prototype.get=Ye,L.prototype.has=Je,L.prototype.set=Xe;var Ze=L,tr=function(t,e){var r=this.__data__;if(r instanceof tt){var n=r.__data__;if(!Y||n.length<199)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new Ze(n)}return r.set(t,e),this.size=r.size,this};function B(t){var e=this.__data__=new tt(t);this.size=e.size}B.prototype.clear=Pe,B.prototype.delete=Ce,B.prototype.get=Ae,B.prototype.has=Te,B.prototype.set=tr;var er=B,rr=function(t,e){for(var r=-1,n=t==null?0:t.length;++r<n&&e(t[r],r,t)!==!1;);return t},St=function(){try{var t=z(Object,"defineProperty");return t({},"",{}),t}catch{}}(),Rt=function(t,e,r){e=="__proto__"&&St?St(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r},nr=Object.prototype.hasOwnProperty,Dt=function(t,e,r){var n=t[e];nr.call(t,e)&&Pt(n,r)&&(r!==void 0||e in t)||Rt(t,e,r)},rt=function(t,e,r,n){var i=!r;r||(r={});for(var h=-1,d=e.length;++h<d;){var c=e[h],m=n?n(r[c],t[c],c,r,t):void 0;m===void 0&&(m=t[c]),i?Rt(r,c,m):Dt(r,c,m)}return r},or=function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n},It=function(t){return R(t)&&D(t)=="[object Arguments]"},zt=Object.prototype,ir=zt.hasOwnProperty,ar=zt.propertyIsEnumerable,sr=It(function(){return arguments}())?It:function(t){return R(t)&&ir.call(t,"callee")&&!ar.call(t,"callee")},st=Array.isArray,Mt=a(5),cr=/^(?:0|[1-9]\d*)$/,ur=function(t,e){var r=typeof t;return!!(e=e==null?9007199254740991:e)&&(r=="number"||r!="symbol"&&cr.test(t))&&t>-1&&t%1==0&&t<e},Ft=function(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=9007199254740991},y={};y["[object Float32Array]"]=y["[object Float64Array]"]=y["[object Int8Array]"]=y["[object Int16Array]"]=y["[object Int32Array]"]=y["[object Uint8Array]"]=y["[object Uint8ClampedArray]"]=y["[object Uint16Array]"]=y["[object Uint32Array]"]=!0,y["[object Arguments]"]=y["[object Array]"]=y["[object ArrayBuffer]"]=y["[object Boolean]"]=y["[object DataView]"]=y["[object Date]"]=y["[object Error]"]=y["[object Function]"]=y["[object Map]"]=y["[object Number]"]=y["[object Object]"]=y["[object RegExp]"]=y["[object Set]"]=y["[object String]"]=y["[object WeakMap]"]=!1;var hr=function(t){return R(t)&&Ft(t.length)&&!!y[D(t)]},ct=function(t){return function(e){return t(e)}},$=a(2),Ut=$.a&&$.a.isTypedArray,dr=Ut?ct(Ut):hr,lr=Object.prototype.hasOwnProperty,Nt=function(t,e){var r=st(t),n=!r&&sr(t),i=!r&&!n&&Object(Mt.a)(t),h=!r&&!n&&!i&&dr(t),d=r||n||i||h,c=d?or(t.length,String):[],m=c.length;for(var v in t)!e&&!lr.call(t,v)||d&&(v=="length"||i&&(v=="offset"||v=="parent")||h&&(v=="buffer"||v=="byteLength"||v=="byteOffset")||ur(v,m))||c.push(v);return c},fr=Object.prototype,ut=function(t){var e=t&&t.constructor;return t===(typeof e=="function"&&e.prototype||fr)},kt=function(t,e){return function(r){return t(e(r))}},pr=kt(Object.keys,Object),_r=Object.prototype.hasOwnProperty,yr=function(t){if(!ut(t))return pr(t);var e=[];for(var r in Object(t))_r.call(t,r)&&r!="constructor"&&e.push(r);return e},Lt=function(t){return t!=null&&Ft(t.length)&&!At(t)},ht=function(t){return Lt(t)?Nt(t):yr(t)},vr=function(t,e){return t&&rt(e,ht(e),t)},br=function(t){var e=[];if(t!=null)for(var r in Object(t))e.push(r);return e},gr=Object.prototype.hasOwnProperty,mr=function(t){if(!p(t))return br(t);var e=ut(t),r=[];for(var n in t)(n!="constructor"||!e&&gr.call(t,n))&&r.push(n);return r},dt=function(t){return Lt(t)?Nt(t,!0):mr(t)},jr=function(t,e){return t&&rt(e,dt(e),t)},wr=a(8),Er=function(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e},xr=function(t,e){for(var r=-1,n=t==null?0:t.length,i=0,h=[];++r<n;){var d=t[r];e(d,r,t)&&(h[i++]=d)}return h},Bt=function(){return[]},Or=Object.prototype.propertyIsEnumerable,$t=Object.getOwnPropertySymbols,lt=$t?function(t){return t==null?[]:(t=Object(t),xr($t(t),function(e){return Or.call(t,e)}))}:Bt,Pr=function(t,e){return rt(t,lt(t),e)},Ht=function(t,e){for(var r=-1,n=e.length,i=t.length;++r<n;)t[i+r]=e[r];return t},ft=kt(Object.getPrototypeOf,Object),Qt=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)Ht(e,lt(t)),t=ft(t);return e}:Bt,Cr=function(t,e){return rt(t,Qt(t),e)},qt=function(t,e,r){var n=e(t);return st(t)?n:Ht(n,r(t))},Ar=function(t){return qt(t,ht,lt)},Tr=function(t){return qt(t,dt,Qt)},pt=z(g.a,"DataView"),_t=z(g.a,"Promise"),yt=z(g.a,"Set"),vt=z(g.a,"WeakMap"),Wr=I(pt),Sr=I(Y),Rr=I(_t),Dr=I(yt),Ir=I(vt),M=D;(pt&&M(new pt(new ArrayBuffer(1)))!="[object DataView]"||Y&&M(new Y)!="[object Map]"||_t&&M(_t.resolve())!="[object Promise]"||yt&&M(new yt)!="[object Set]"||vt&&M(new vt)!="[object WeakMap]")&&(M=function(t){var e=D(t),r=e=="[object Object]"?t.constructor:void 0,n=r?I(r):"";if(n)switch(n){case Wr:return"[object DataView]";case Sr:return"[object Map]";case Rr:return"[object Promise]";case Dr:return"[object Set]";case Ir:return"[object WeakMap]"}return e});var bt=M,zr=Object.prototype.hasOwnProperty,Mr=function(t){var e=t.length,r=new t.constructor(e);return e&&typeof t[0]=="string"&&zr.call(t,"index")&&(r.index=t.index,r.input=t.input),r},Vt=g.a.Uint8Array,gt=function(t){var e=new t.constructor(t.byteLength);return new Vt(e).set(new Vt(t)),e},Fr=function(t,e){var r=e?gt(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)},Ur=/\w*$/,Nr=function(t){var e=new t.constructor(t.source,Ur.exec(t));return e.lastIndex=t.lastIndex,e},Kt=S?S.prototype:void 0,Gt=Kt?Kt.valueOf:void 0,kr=function(t){return Gt?Object(Gt.call(t)):{}},Lr=function(t,e){var r=e?gt(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)},Br=function(t,e,r){var n=t.constructor;switch(e){case"[object ArrayBuffer]":return gt(t);case"[object Boolean]":case"[object Date]":return new n(+t);case"[object DataView]":return Fr(t,r);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return Lr(t,r);case"[object Map]":return new n;case"[object Number]":case"[object String]":return new n(t);case"[object RegExp]":return Nr(t);case"[object Set]":return new n;case"[object Symbol]":return kr(t)}},Yt=Object.create,$r=function(){function t(){}return function(e){if(!p(e))return{};if(Yt)return Yt(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}(),Hr=function(t){return typeof t.constructor!="function"||ut(t)?{}:$r(ft(t))},Qr=function(t){return R(t)&&bt(t)=="[object Map]"},Jt=$.a&&$.a.isMap,qr=Jt?ct(Jt):Qr,Vr=function(t){return R(t)&&bt(t)=="[object Set]"},Xt=$.a&&$.a.isSet,Kr=Xt?ct(Xt):Vr,_={};_["[object Arguments]"]=_["[object Array]"]=_["[object ArrayBuffer]"]=_["[object DataView]"]=_["[object Boolean]"]=_["[object Date]"]=_["[object Float32Array]"]=_["[object Float64Array]"]=_["[object Int8Array]"]=_["[object Int16Array]"]=_["[object Int32Array]"]=_["[object Map]"]=_["[object Number]"]=_["[object Object]"]=_["[object RegExp]"]=_["[object Set]"]=_["[object String]"]=_["[object Symbol]"]=_["[object Uint8Array]"]=_["[object Uint8ClampedArray]"]=_["[object Uint16Array]"]=_["[object Uint32Array]"]=!0,_["[object Error]"]=_["[object Function]"]=_["[object WeakMap]"]=!1;var Gr=function t(e,r,n,i,h,d){var c,m=1&r,v=2&r,nt=4&r;if(n&&(c=h?n(e,i,h,d):n(e)),c!==void 0)return c;if(!p(e))return e;var U=st(e);if(U){if(c=Mr(e),!m)return Er(e,c)}else{var C=bt(e),H=C=="[object Function]"||C=="[object GeneratorFunction]";if(Object(Mt.a)(e))return Object(wr.a)(e,m);if(C=="[object Object]"||C=="[object Arguments]"||H&&!h){if(c=v||H?{}:Hr(e),!m)return v?Cr(e,jr(c,e)):Pr(e,vr(c,e))}else{if(!_[C])return h?e:{};c=Br(e,C,m)}}d||(d=new er);var ot=d.get(e);if(ot)return ot;d.set(e,c),Kr(e)?e.forEach(function(O){c.add(t(O,r,n,O,e,d))}):qr(e)&&e.forEach(function(O,A){c.set(A,t(O,r,n,A,e,d))});var X=U?void 0:(nt?v?Tr:Ar:v?dt:ht)(e);return rr(X||e,function(O,A){X&&(O=e[A=O]),Dt(c,A,t(O,r,n,A,e,d))}),c},Yr=function(t,e){return Gr(t,5,e=typeof e=="function"?e:void 0)},Jr=Function.prototype,Xr=Object.prototype,Zt=Jr.toString,Zr=Xr.hasOwnProperty,tn=Zt.call(Object),en=function(t){if(!R(t)||D(t)!="[object Object]")return!1;var e=ft(t);if(e===null)return!0;var r=Zr.call(e,"constructor")&&e.constructor;return typeof r=="function"&&r instanceof r&&Zt.call(r)==tn},rn=function(t){return R(t)&&t.nodeType===1&&!en(t)};function mt(t,e=new Set){const r=[t],n=new Set;for(;r.length>0;){const i=r.shift();if(!(n.has(i)||nn(i)||e.has(i)))if(n.add(i),i[Symbol.iterator])try{for(const h of i)r.push(h)}catch{}else for(const h in i)h!=="defaultValue"&&r.push(i[h])}return n}function nn(t){const e=Object.prototype.toString.call(t),r=typeof t;return r==="number"||r==="boolean"||r==="string"||r==="symbol"||r==="function"||e==="[object Date]"||e==="[object RegExp]"||e==="[object Module]"||t==null||t instanceof EventTarget||t instanceof Event}function te(t,e,r=new Set){if(t===e&&typeof(n=t)=="object"&&n!==null)return!0;var n;const i=mt(t,r),h=mt(e,r);for(const d of i)if(h.has(d))return!0;return!1}class ee{constructor(e){if(this.crashes=[],this.state="initializing",this._crashNumberLimit=typeof e.crashNumberLimit=="number"?e.crashNumberLimit:3,this._now=Date.now,this._minimumNonErrorTimePeriod=typeof e.minimumNonErrorTimePeriod=="number"?e.minimumNonErrorTimePeriod:5e3,this._boundErrorHandler=r=>{const n=r.error||r.reason;n instanceof Error&&this._handleError(n,r)},this._listeners={},!this._restart)throw new Error("The Watchdog class was split into the abstract `Watchdog` class and the `EditorWatchdog` class. Please, use `EditorWatchdog` if you have used the `Watchdog` class previously.")}setCreator(e){this._creator=e}setDestructor(e){this._destructor=e}destroy(){this._stopErrorHandling(),this._listeners={}}on(e,r){this._listeners[e]||(this._listeners[e]=[]),this._listeners[e].push(r)}off(e,r){this._listeners[e]=this._listeners[e].filter(n=>n!==r)}_fire(e,...r){const n=this._listeners[e]||[];for(const i of n)i.apply(this,[null,...r])}_startErrorHandling(){window.addEventListener("error",this._boundErrorHandler),window.addEventListener("unhandledrejection",this._boundErrorHandler)}_stopErrorHandling(){window.removeEventListener("error",this._boundErrorHandler),window.removeEventListener("unhandledrejection",this._boundErrorHandler)}_handleError(e,r){if(this._shouldReactToError(e)){this.crashes.push({message:e.message,stack:e.stack,filename:r.filename,lineno:r.lineno,colno:r.colno,date:this._now()});const n=this._shouldRestart();this.state="crashed",this._fire("stateChange"),this._fire("error",{error:e,causesRestart:n}),n?this._restart():(this.state="crashedPermanently",this._fire("stateChange"))}}_shouldReactToError(e){return e.is&&e.is("CKEditorError")&&e.context!==void 0&&e.context!==null&&this.state==="ready"&&this._isErrorComingFromThisItem(e)}_shouldRestart(){return this.crashes.length<=this._crashNumberLimit?!0:(this.crashes[this.crashes.length-1].date-this.crashes[this.crashes.length-1-this._crashNumberLimit].date)/this._crashNumberLimit>this._minimumNonErrorTimePeriod}}class re extends ee{constructor(e,r={}){super(r),this._editor=null,this._throttledSave=ge(this._save.bind(this),typeof r.saveInterval=="number"?r.saveInterval:5e3),this._creator=(n,i)=>e.create(n,i),this._destructor=n=>n.destroy()}get editor(){return this._editor}get _item(){return this._editor}_restart(){return Promise.resolve().then(()=>(this.state="initializing",this._fire("stateChange"),this._destroy())).catch(e=>{console.error("An error happened during the editor destroying.",e)}).then(()=>{if(typeof this._elementOrData=="string")return this.create(this._data,this._config,this._config.context);{const e=Object.assign({},this._config,{initialData:this._data});return this.create(this._elementOrData,e,e.context)}}).then(()=>{this._fire("restart")})}create(e=this._elementOrData,r=this._config,n){return Promise.resolve().then(()=>(super._startErrorHandling(),this._elementOrData=e,this._config=this._cloneEditorConfiguration(r)||{},this._config.context=n,this._creator(e,this._config))).then(i=>{this._editor=i,i.model.document.on("change:data",this._throttledSave),this._lastDocumentVersion=i.model.document.version,this._data=this._getData(),this.state="ready",this._fire("stateChange")})}destroy(){return Promise.resolve().then(()=>(this.state="destroyed",this._fire("stateChange"),super.destroy(),this._destroy()))}_destroy(){return Promise.resolve().then(()=>{this._stopErrorHandling(),this._throttledSave.flush();const e=this._editor;return this._editor=null,this._destructor(e)})}_save(){const e=this._editor.model.document.version;if(e!==this._lastDocumentVersion)try{this._data=this._getData(),this._lastDocumentVersion=e}catch(r){console.error(r,"An error happened during restoring editor data. Editor will be restored from the previously saved data.")}}_setExcludedProperties(e){this._excludedProps=e}_getData(){const e={};for(const r of this._editor.model.document.getRootNames())e[r]=this._editor.data.get({rootName:r});return e}_isErrorComingFromThisItem(e){return te(this._editor,e.context,this._excludedProps)}_cloneEditorConfiguration(e){return Yr(e,(r,n)=>rn(r)||n==="context"?r:void 0)}}const j=new Array(256).fill().map((t,e)=>("0"+e.toString(16)).slice(-2));class ne extends ee{constructor(e,r={}){super(r),this._watchdogs=new Map,this._watchdogConfig=r,this._context=null,this._contextProps=new Set,this._actionQueue=new on,this._creator=n=>e.create(n),this._destructor=n=>n.destroy(),this._actionQueue.onEmpty(()=>{this.state==="initializing"&&(this.state="ready",this._fire("stateChange"))})}get context(){return this._context}create(e={}){return this._actionQueue.enqueue(()=>(this._contextConfig=e,this._create()))}getItem(e){return this._getWatchdog(e)._item}getItemState(e){return this._getWatchdog(e).state}add(e){const r=Array.isArray(e)?e:[e];return this._actionQueue.enqueue(()=>{if(this.state==="destroyed")throw new Error("Cannot add items to destroyed watchdog.");if(!this._context)throw new Error("Context was not created yet. You should call the `ContextWatchdog#create()` method first.");return Promise.all(r.map(n=>{let i;if(this._watchdogs.has(n.id))throw new Error(`Item with the given id is already added: '${n.id}'.`);if(n.type==="editor")return i=new re(this._watchdogConfig),i.setCreator(n.creator),i._setExcludedProperties(this._contextProps),n.destructor&&i.setDestructor(n.destructor),this._watchdogs.set(n.id,i),i.on("error",(h,{error:d,causesRestart:c})=>{this._fire("itemError",{itemId:n.id,error:d}),c&&this._actionQueue.enqueue(()=>new Promise(m=>{i.on("restart",function v(){i.off("restart",v),this._fire("itemRestart",{itemId:n.id}),m()}.bind(this))}))}),i.create(n.sourceElementOrData,n.config,this._context);throw new Error(`Not supported item type: '${n.type}'.`)}))})}remove(e){const r=Array.isArray(e)?e:[e];return this._actionQueue.enqueue(()=>Promise.all(r.map(n=>{const i=this._getWatchdog(n);return this._watchdogs.delete(n),i.destroy()})))}destroy(){return this._actionQueue.enqueue(()=>(this.state="destroyed",this._fire("stateChange"),super.destroy(),this._destroy()))}_restart(){return this._actionQueue.enqueue(()=>(this.state="initializing",this._fire("stateChange"),this._destroy().catch(e=>{console.error("An error happened during destroying the context or items.",e)}).then(()=>this._create()).then(()=>this._fire("restart"))))}_create(){return Promise.resolve().then(()=>(this._startErrorHandling(),this._creator(this._contextConfig))).then(e=>(this._context=e,this._contextProps=mt(this._context),Promise.all(Array.from(this._watchdogs.values()).map(r=>(r._setExcludedProperties(this._contextProps),r.create(void 0,void 0,this._context))))))}_destroy(){return Promise.resolve().then(()=>{this._stopErrorHandling();const e=this._context;return this._context=null,this._contextProps=new Set,Promise.all(Array.from(this._watchdogs.values()).map(r=>r.destroy())).then(()=>this._destructor(e))})}_getWatchdog(e){const r=this._watchdogs.get(e);if(!r)throw new Error(`Item with the given id was not registered: ${e}.`);return r}_isErrorComingFromThisItem(e){for(const r of this._watchdogs.values())if(r._isErrorComingFromThisItem(e))return!1;return te(this._context,e.context)}}class on{constructor(){this._promiseQueue=Promise.resolve(),this._onEmptyCallbacks=[]}onEmpty(e){this._onEmptyCallbacks.push(e)}enqueue(e){let r;const n=this._promiseQueue.then(e).then(()=>{this._promiseQueue===r&&this._onEmptyCallbacks.forEach(i=>i())});return r=this._promiseQueue=n.catch(()=>{}),n}}const oe=u.a.createContext("contextWatchdog");class jt extends u.a.Component{constructor(e,r){super(e,r),this.contextWatchdog=null,this.props.isLayoutReady&&this._initializeContextWatchdog(this.props.config)}shouldComponentUpdate(e){return e.id!==this.props.id&&(this.contextWatchdog&&this.contextWatchdog.destroy(),this._initializeContextWatchdog(e.config)),e.isLayoutReady&&!this.contextWatchdog?(this._initializeContextWatchdog(e.config),!0):this.props.children!==e.children}render(){return u.a.createElement(oe.Provider,{value:this.contextWatchdog},this.props.children)}componentWillUnmount(){this._destroyContext()}_initializeContextWatchdog(e){this.contextWatchdog=new ne(this.props.context),this.contextWatchdog.create(e).catch(r=>{this.props.onError(r,{phase:"initialization",willContextRestart:!1})}),this.contextWatchdog.on("error",(r,n)=>{this.props.onError(n.error,{phase:"runtime",willContextRestart:n.causesRestart})}),this.contextWatchdog.on("stateChange",()=>{this.contextWatchdog.state==="ready"&&this.props.onReady&&this.props.onReady(this.contextWatchdog.context)})}async _destroyContext(){this.contextWatchdog&&(await this.contextWatchdog.destroy(),this.contextWatchdog=null)}}jt.defaultProps={isLayoutReady:!0,onError:(t,e)=>console.error(t,e)},jt.propTypes={id:s.a.string,isLayoutReady:s.a.bool,context:s.a.func,config:s.a.object,onReady:s.a.func,onError:s.a.func};class F extends u.a.Component{constructor(e){super(e),this.domContainer=u.a.createRef(),this.watchdog=null}get editor(){return this.watchdog?this.watchdog.editor:null}shouldComponentUpdate(e){return!!this.editor&&(e.id!==this.props.id||(this._shouldUpdateEditor(e)&&this.editor.setData(e.data),"disabled"in e&&(this.editor.isReadOnly=e.disabled),!1))}componentDidMount(){this._initializeEditor()}componentDidUpdate(){this._destroyEditor(),this._initializeEditor()}componentWillUnmount(){this._destroyEditor()}render(){return u.a.createElement("div",{ref:this.domContainer})}_initializeEditor(){this.context instanceof ne?this.watchdog=new an(this.context):this.watchdog=new F._EditorWatchdog(this.props.editor),this.watchdog.setCreator((e,r)=>this._createEditor(e,r)),this.watchdog.on("error",(e,{error:r,causesRestart:n})=>{this.props.onError(r,{phase:"runtime",willEditorRestart:n})}),this.watchdog.create(this.domContainer.current,this._getConfig()).catch(e=>this.props.onError(e,{phase:"initialization",willEditorRestart:!1}))}_createEditor(e,r){return this.props.editor.create(e,r).then(n=>{"disabled"in this.props&&(n.isReadOnly=this.props.disabled);const i=n.model.document,h=n.editing.view.document;return i.on("change:data",d=>{this.props.onChange&&this.props.onChange(d,n)}),h.on("focus",d=>{this.props.onFocus&&this.props.onFocus(d,n)}),h.on("blur",d=>{this.props.onBlur&&this.props.onBlur(d,n)}),setTimeout(()=>{this.props.onReady&&this.props.onReady(this.editor)}),n})}_destroyEditor(){this.watchdog&&(this.watchdog.destroy(),this.watchdog=null)}_shouldUpdateEditor(e){return this.props.data!==e.data&&this.editor.getData()!==e.data}_getConfig(){return this.props.data&&this.props.config.initialData&&console.warn("Editor data should be provided either using `config.initialData` or `data` properties. The config property is over the data value and the first one will be used when specified both."),{...this.props.config,initialData:this.props.config.initialData||this.props.data||""}}}class an{constructor(e){this._contextWatchdog=e,this._id=function(){const r=4294967296*Math.random()>>>0,n=4294967296*Math.random()>>>0,i=4294967296*Math.random()>>>0,h=4294967296*Math.random()>>>0;return"e"+j[r>>0&255]+j[r>>8&255]+j[r>>16&255]+j[r>>24&255]+j[n>>0&255]+j[n>>8&255]+j[n>>16&255]+j[n>>24&255]+j[i>>0&255]+j[i>>8&255]+j[i>>16&255]+j[i>>24&255]+j[h>>0&255]+j[h>>8&255]+j[h>>16&255]+j[h>>24&255]}()}setCreator(e){this._creator=e}create(e,r){return this._contextWatchdog.add({sourceElementOrData:e,config:r,creator:this._creator,id:this._id,type:"editor"})}on(e,r){this._contextWatchdog.on("itemError",(n,{itemId:i,causesRestart:h,error:d})=>{i===this._id&&r(null,{error:d,causesRestart:h})})}destroy(){this._contextWatchdog.remove(this._id)}get editor(){return this._contextWatchdog.getItem(this._id)}}F.contextType=oe,F.propTypes={editor:s.a.func.isRequired,data:s.a.string,config:s.a.object,onChange:s.a.func,onReady:s.a.func,onFocus:s.a.func,onBlur:s.a.func,onError:s.a.func,disabled:s.a.bool,onInit:(t,e)=>{if(t[e])return new Error('The "onInit" property is not supported anymore by the CKEditor component. Use the "onReady" property instead.')}},F.defaultProps={config:{},onError:(t,e)=>console.error(t,e)},F._EditorWatchdog=re}])})})(ie,ie.exports);export{dn as a,ie as b,un as c,hn as g};
